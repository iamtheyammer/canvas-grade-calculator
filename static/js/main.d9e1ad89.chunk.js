(window["webpackJsonpcanvas-grade-calculator"]=window["webpackJsonpcanvas-grade-calculator"]||[]).push([[0],{193:function(e,t,a){e.exports=a.p+"static/media/banner.ac4b901b.svg"},201:function(e,t,a){e.exports=a.p+"static/media/banner-light.72ba0815.svg"},205:function(e){e.exports=JSON.parse('[{"timestamp":1568909947972,"type":0,"title":"Fixed grade calculation algorithm","content":"Fixed the algorithm that calculates grades to make it actually accurate. You might see some of your grades drop due to the previously inaccurate calculation."},{"timestamp":1568909947972,"type":1,"title":"Added a changelog","content":"You\'ll now be notified of new updates."},{"timestamp":1568940884455,"type":0,"title":"Removed Invalid Breakdowns","content":"Removed the See Breakdown link on classes that don\'t have breakdowns."},{"timestamp":1576004921578,"type":0,"title":"Updated the grade calculation algorithm","content":"Success skills are now optional, and 75% (of the number of outcomes) is now rounded down instead of up."}]')},210:function(e,t,a){e.exports=a(387)},237:function(e,t,a){},293:function(e,t,a){},387:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),s=a(19),l=a(22),u=a(59),i=a(83),m=a(27),d=a.n(m),p=a(50),f=a(192),h=a.n(f),b={currentVersion:"1580183221759",defaultApiUri:"https://canvas-grade-calculator.herokuapp.com",googleAnalyticsId:"UA-148148260-1",nodeEnv:"production"},v="development"===b.nodeEnv?"http://localhost:8000":b.defaultApiUri?b.defaultApiUri:"",g=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"get";return h()({method:r,url:"".concat(v,"/api/canvas/").concat(e),headers:{"X-Canvas-Token":t,"X-Canvas-Subdomain":a},params:n})},E="CANVAS_PROXY_ERROR";function O(e,t){return{type:E,id:e,res:t}}var k="LOADING_START",y="LOADING_END";function S(e){return{type:k,id:e}}function T(e){return{type:y,id:e}}var w="CANVAS_LOGOUT",j="CANVAS_GOT_STORED_CREDENTIALS",I="CANVAS_GOT_TOKEN_ENTRY",A="CANVAS_GOT_USER_OAUTH",x="CANVAS_GOT_NEW_TOKEN_FROM_REFRESH_TOKEN",R="CANVAS_GOT_USER_PROFILE",C="CANVAS_GOT_USER_COURSES",N="CANVAS_GOT_OUTCOME_RESULTS_FOR_COURSE",_="CANVAS_GOT_OUTCOME_ROLLUPS_FOR_COURSE",P="CANVAS_GOT_OUTCOME_ROLLUPS_AND_OUTCOMES_FOR_COURSE",D="CANVAS_GOT_ASSIGNMENTS_FOR_COURSE";function L(e,t){return localStorage.token="",localStorage.subdomain="",localStorage.refreshToken="",e.length>1&&(window.location=e),{type:w,forwardUrl:e}}function U(e,t,a){return function(){var n=Object(p.a)(d.a.mark(function n(r){var o;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r(S(e)),n.prev=1,n.next=4,g("users/profile/self",t,a);case 4:o=n.sent,r((c=o.data,{type:R,user:c})),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),r(O(e,n.t0.response));case 11:r(T(e));case 12:case"end":return n.stop()}var c},n,null,[[1,8]])}));return function(e){return n.apply(this,arguments)}}()}function G(e,t,a){return function(){var n=Object(p.a)(d.a.mark(function n(r){var o;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r(S(e)),n.prev=1,n.next=4,g("courses",t,a);case 4:o=n.sent,r((c=o.data,{type:C,courses:c})),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),r(O(e,n.t0.response));case 11:r(T(e));case 12:case"end":return n.stop()}var c},n,null,[[1,8]])}));return function(e){return n.apply(this,arguments)}}()}function F(e,t){return{type:_,results:e,courseId:t}}function H(e,t,a){return{type:P,results:e,outcomes:t,courseId:a}}function B(e,t){return{type:N,results:e,courseId:t}}function M(e,t){return{type:D,assignments:e,courseId:t}}a(236);var V=a(25),Y=(a(237),a(193)),W=a.n(Y),z='\nYour use of the Canvas CBL Grade Calculator ("the software") is licensed by the terms listed below.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\nINCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\nDAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,\nARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n',K=a(394),J=a(395),X=a(79),q=a(34),Z=a(396);var Q=Object(s.b)(function(e){return{token:e.canvas.token}})(function(e){var t=Object(n.useState)(!1),a=Object(V.a)(t,2),o=a[0],c=a[1];return e.token?r.a.createElement(u.a,{to:"/dashboard"}):r.a.createElement("div",{className:"background"},r.a.createElement(K.a,{className:"card",title:r.a.createElement("img",{src:W.a,alt:"banner"})},r.a.createElement("div",{className:"static-text"},r.a.createElement(J.a.Title,{level:2},"Welcome!"),r.a.createElement(J.a.Text,null,"This tool calculates grades based on outcomes in Canvas. To use it, please accept the Terms and Conditions, then log in with Canvas.")),r.a.createElement("div",null,r.a.createElement(X.a,{siz:!0,onChange:function(e){return c(e.target.checked)},className:"center-checkbox"},"I accept the"," ",r.a.createElement(q.a,{type:"link",style:{marginLeft:"-15px"},onClick:function(){return Z.a.info({title:"Terms and Conditions",content:z})}},"terms and conditions")),r.a.createElement("div",{style:{marginTop:"15px"}}),r.a.createElement(q.a,{type:"primary",size:o?"large":"default",className:"center button",disabled:!o,onClick:function(){return window.location.href="".concat(v,"/api/canvas/oauth2/request")}},"Sign in with Canvas"))))}),$=a(76),ee=a(77),te=a(80),ae=a(78),ne=a(82),re=a(399),oe=a(397),ce=function(e){function t(e){var a;return Object($.a)(this,t),(a=Object(te.a)(this,Object(ae.a)(t).call(this,e))).tokenOnChange=function(e){e.preventDefault(),a.setState({token:e.target.value})},a.onSubmit=function(e){var t,n;e.preventDefault(),a.props.dispatch((t=a.state.token,n=a.state.subdomain,localStorage.token=t,localStorage.subdomain=n,{type:I,token:t,subdomain:n})),re.a.success({message:"Success!",description:"Saved token and subdomain."})},a.subdomainOnChange=function(e){e.preventDefault(),a.setState({subdomain:e.target.value})},a.state={token:a.props.token||"",subdomain:a.props.subdomain||""},a}return Object(ne.a)(t,e),Object(ee.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(J.a.Title,{level:2},"Advanced: Manual token entry"),r.a.createElement(J.a.Paragraph,null,"Manually generate a token, then enter it here, along with your subdomain. Leave the subdomain empty to use"," ",r.a.createElement("code",null,"canvas.instructure.com")),r.a.createElement(oe.a,{addonBefore:"Canvas Token",onPressEnter:this.onSubmit,onChange:this.tokenOnChange,value:this.state.token}),r.a.createElement("br",null),r.a.createElement(oe.a,{addonBefore:"Canvas Subdomain",onPressEnter:this.onSubmit,onChange:this.subdomainOnChange,value:this.state.subdomain}),r.a.createElement("br",null),r.a.createElement(q.a,{type:"primary",onClick:this.onSubmit},"Submit"),r.a.createElement(J.a.Paragraph,null,"Return home to get redirected to the dashboard."))}}]),t}(n.Component),se=Object(s.b)(function(e){return{token:e.canvas.token,subdomain:e.canvas.subdomain}})(ce),le=a(200);var ue=Object(s.b)(function(e){return{}})(function(e){var t=Object(le.parse)(e.location.search.slice(1,e.location.search.length));if(t.error||!t.canvas_response)return"access_denied"===t.error?r.a.createElement(u.a,{to:"/"}):(re.a.error({message:"Unknown Error",duration:0,description:"There was an unknown error logging you in with Canvas. Try again later."}),r.a.createElement(u.a,{to:"/"}));var a,n,o,c=JSON.parse(t.canvas_response);return e.dispatch((a=c.access_token,n=c.refresh_token,o=t.subdomain,localStorage.token=a,localStorage.refreshToken=n,localStorage.subdomain=o,{type:A,token:a,refreshToken:n,subdomain:o})),localStorage.prevVersion=b.currentVersion,re.a.success({message:"Success!",description:"Welcome, ".concat(c.user.name.split(" ")[0],"! You've successfully logged in with Canvas.")}),r.a.createElement(u.a,{to:"/dashboard"})}),ie=a(390),me=a(398),de=a(391),pe=(a(293),a(201)),fe=a.n(pe),he=a(84),be=ie.a.Header;var ve=Object(u.g)(function(e){return r.a.createElement(be,null,r.a.createElement("img",{src:fe.a,className:"logo",alt:"canvas-grade-calculator light banner"}),r.a.createElement(he.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["profile"],selectedKeys:["/".concat(e.location.pathname.split("/").slice(1,3).join("/"))],style:{lineHeight:"64px",float:"left"}},r.a.createElement(he.a.Item,{key:"/dashboard/profile"},r.a.createElement(l.b,{to:"/dashboard/profile"},"Profile")),r.a.createElement(he.a.Item,{key:"/dashboard/grades"},r.a.createElement(l.b,{to:"/dashboard/grades"},"Grades"))),r.a.createElement(he.a,{theme:"dark",mode:"horizontal",style:{lineHeight:"64px",float:"right"},selectable:!1},r.a.createElement(he.a.SubMenu,{key:"moreActions",title:"More Actions"},r.a.createElement(he.a.Item,{key:"openIssue"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/iamtheyammer/canvas-grade-calculator/issues/new/choose"},"Submit Feedback/Report a Bug")),r.a.createElement(he.a.Item,{key:"forkOnGitHub"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/iamtheyammer/canvas-grade-calculator"},"Fork this project on GitHub"))),r.a.createElement(he.a.Item,{key:"/dashboard/logout"},r.a.createElement(l.b,{to:"/dashboard/logout"},"Logout"))))}),ge=a(28),Ee=a.n(ge),Oe=a(118),ke=a(401),ye=a(1),Se=a(9),Te=function(e){function t(e){var a;return Object($.a)(this,t),(a=Object(te.a)(this,Object(ae.a)(t).call(this,e))).handleOk=function(){window.location.reload()},a.handleCancel=function(){a.setState({redirect:!0})},a.handleUnknown=function(){Z.a.confirm({icon:r.a.createElement(Se.a,{type:"exclamation-circle",style:{color:"#D8000C"}}),title:"Unknown Error",content:"Do you want to reload?",okText:"Try again",cancelText:"Logout",onCancel:a.handleCancel,onOk:a.handleOk})},a.state={redirect:!1},a}return Object(ne.a)(t,e),Object(ee.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.res,a=e.error,n=e.refreshToken,o=e.subdomain,c=e.dispatch,s=t||a.res;s?401===parseInt(s.headers["x-canvas-status-code"])?n?(Z.a.info({title:"Re-Authorizing...",content:"Please wait while we re-authorize with Canvas.",closable:!1,okButtonProps:{loading:!0},okText:"One sec...",icon:r.a.createElement(Se.a,{type:"lock"})}),c(function(e,t,a){return function(){var n=Object(p.a)(d.a.mark(function n(r){var o;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r(S(e)),n.prev=1,n.next=4,g("oauth2/refresh_token","",t,{refresh_token:a}).then(function(e){return e.data.access_token});case 4:o=n.sent,localStorage.token=o,r({type:x,newToken:o}),window.location.reload(),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),r(O(e,n.t0.response));case 13:r(T(e));case 14:case"end":return n.stop()}},n,null,[[1,10]])}));return function(e){return n.apply(this,arguments)}}()}(Ee()(),o,n))):Z.a.info({title:"Invalid Canvas Token",content:"There's an issue with your Canvas token or subdomain. Click Logout to enter a different one.",closable:!1,icon:r.a.createElement(Se.a,{type:"exclamation-circle",style:{color:"#D8000C"}}),okText:"Logout",onOk:this.handleCancel}):this.handleUnknown():this.handleUnknown()}},{key:"render",value:function(){return this.state.redirect?r.a.createElement(u.a,{to:"/dashboard/logout"}):r.a.createElement("div",null)}}]),t}(n.Component),we=Object(s.b)(function(e){return{refreshToken:e.canvas.refreshToken,token:e.canvas.token}})(Te);we.propTypes={error:Object(ye.shape)({res:ye.object})};var je=we,Ie=function(e){function t(e){var a;return Object($.a)(this,t),(a=Object(te.a)(this,Object(ae.a)(t).call(this,e))).state={getUserId:""},a}return Object(ne.a)(t,e),Object(ee.a)(t,[{key:"componentDidMount",value:function(){if(!this.props.user){var e=Ee()();return this.setState({getUserId:e}),this.props.dispatch(U(e,this.props.token,this.props.subdomain))}}},{key:"render",value:function(){if(this.props.error[this.state.getUserId])return r.a.createElement(je,{res:this.props.error[this.state.getUserId].res});if(!this.props.user||this.props.loading.includes(this.state.getUserId))return r.a.createElement("div",{align:"center",style:{marginTop:"20px"}},r.a.createElement(Oe.a,{size:"large"}));var e=this.props.user;return r.a.createElement(ke.a,{title:"My Profile",bordered:!0},r.a.createElement(ke.a.Item,{label:"Name"},e.name),r.a.createElement(ke.a.Item,{label:"Email"},e.primary_email),r.a.createElement(ke.a.Item,{label:"ID"},e.id),r.a.createElement(ke.a.Item,{label:"Time Zone"},e.time_zone))}}]),t}(n.Component),Ae=Object(s.b)(function(e){return{user:e.canvas.user,token:e.canvas.token,subdomain:e.canvas.subdomain,error:e.error,loading:e.loading}})(Ie),xe=a(208),Re=a(393),Ce=a(30),Ne=function(e){return e.startsWith("SS")};function _e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Pe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_e(a,!0).forEach(function(t){Object(Ce.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_e(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var De=function(e){var t=Object.keys(e),a={};return t.forEach(function(t){var n=e[t],r=n[0].scores.map(function(e){return e.score});if(r.length<1)a[t]={grade:"N/A"};else{var o=n[0].scores.filter(function(e){return!Ne(e.title)}).map(function(e){return e.score}),c=Le(r),s=Ge[c.grade],l=Le(o),u=Ge[l.grade];a[t]=u>s?Pe({},l,{rank:u,hasSuccessSkills:!1,ifOppositeSuccessSkills:c}):Pe({},c,s>u?{rank:s,hasSuccessSkills:!0,ifOppositeSuccessSkills:l}:{rank:s})}}),a};function Le(e){for(var t=Math.floor(75*e.length/100),a=e.sort(function(e,t){return t-e}),n=a.slice(0,t),r=n[n.length-1],o=a[a.length-1],c=0;c<Ue.length;c++){var s=Ue[c][0],l=Ue[c][1][0];if(!(o<Ue[c][1][1])&&!(r<l))return{grade:s,sortedOutcomes:a,countedOutcomes:n,lowestCountedOutcome:r,lowestOutcome:o}}}var Ue=[["A",[3.3,3]],["A-",[3.3,2.5]],["B+",[2.6,2.5]],["B",[2.6,0]],["B-",[2.6,0]],["C",[2.2,0]],["I",[0,0]]],Ge={A:{rank:6,max:3.3,min:3},"A-":{rank:5,max:3.3,min:2.5},"B+":{rank:4,max:2.6,min:2.5},B:{rank:3,max:2.6,min:0},"B-":{rank:2,max:2.6,min:0},C:{rank:1,max:2.2,min:0},I:{rank:0,max:0,min:0}},Fe=a(64),He=a.n(Fe),Be=function(e){return e.filter(function(e){return!e.end_at||He()(e.end_at).isAfter()})};function Me(){return(Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ve(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Ye=r.a.createElement("g",null,r.a.createElement("path",{d:"M88.7,11.6c0-0.1-0.1-0.2-0.1-0.3c0-0.1-0.1-0.2-0.1-0.3c0-0.1-0.1-0.2-0.2-0.3c0-0.1-0.1-0.1-0.1-0.2   c-0.2-0.3-0.5-0.6-0.8-0.8c-0.1,0-0.1-0.1-0.2-0.1c-0.1-0.1-0.2-0.1-0.3-0.2c-0.1,0-0.2-0.1-0.3-0.1c-0.1,0-0.2-0.1-0.3-0.1   c-0.2,0-0.4-0.1-0.6-0.1H64.1c-1.7,0-3,1.3-3,3s1.3,3,3,3h14.5L40.9,52.9c-1.2,1.2-1.2,3.1,0,4.2c0.6,0.6,1.4,0.9,2.1,0.9   s1.5-0.3,2.1-0.9l37.7-37.7v14.5c0,1.7,1.3,3,3,3s3-1.3,3-3V12.2C88.8,12,88.8,11.8,88.7,11.6z"}),r.a.createElement("path",{d:"M75.6,46.5c-1.7,0-3,1.3-3,3v33.3H15.2V25.4h33.3c1.7,0,3-1.3,3-3s-1.3-3-3-3H12.2c-1.7,0-3,1.3-3,3v63.4c0,1.7,1.3,3,3,3   h63.4c1.7,0,3-1.3,3-3V49.5C78.6,47.8,77.3,46.5,75.6,46.5z"})),We=function(e){var t=e.svgRef,a=e.title,n=Ve(e,["svgRef","title"]);return r.a.createElement("svg",Me({height:"100px",width:"100px",fill:"#000000",x:"0px",y:"0px",viewBox:"0 0 98 98",style:{enableBackground:"new 0 0 98 98"},xmlSpace:"preserve",ref:t},n),r.a.createElement("title",null,a),Ye)},ze=r.a.forwardRef(function(e,t){return r.a.createElement(We,Me({svgRef:t},e))}),Ke=(a.p,function(e,t){var a=e.toLocaleLowerCase(),n=t.toLocaleLowerCase();return a<n?-1:a>n?1:0}),Je=Ke,Xe=[{title:"Class Name",dataIndex:"name",key:"name",sorter:function(e,t){return Je(e.name,t.name)},render:function(e,t){return"N/A"===t.grade||t.grade.toLowerCase().includes("error")?e:r.a.createElement(l.b,{to:"/dashboard/grades/".concat(t.id)},e)}},{title:"Grade",dataIndex:"grade",key:"grade",sorter:function(e,t){return Je(e.grade,t.grade)},defaultSortOrder:"desc"},{title:"Actions",key:"actions",render:function(e,t){return r.a.createElement("div",null,"N/A"!==t.grade&&!t.grade.toLowerCase().includes("error")&&r.a.createElement("span",null,r.a.createElement(l.b,{to:"/dashboard/grades/".concat(t.id)},"See Breakdown")," | "),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://".concat(localStorage.subdomain||"canvas",".instructure.com/courses/").concat(t.id)},"Open on Canvas ",r.a.createElement(Se.a,{component:ze})))}}];var qe=Object(s.b)(function(e){return{courses:e.canvas.courses,outcomeRollups:e.canvas.outcomeRollups,user:e.canvas.user,token:e.canvas.token,subdomain:e.canvas.subdomain,error:e.error,loading:e.loading}})(function(e){var t=Object(n.useState)(""),a=Object(V.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(""),l=Object(V.a)(s,2),u=l[0],i=l[1],m=Object(n.useState)([]),f=Object(V.a)(m,2),h=f[0],b=f[1],v=Object(n.useState)(""),E=Object(V.a)(v,2),k=E[0],y=E[1],w=[o,u].concat(Object(xe.a)(h)),j=e.dispatch,I=e.token,A=e.subdomain,x=e.loading,R=e.error,C=e.user,N=e.courses,_=e.outcomeRollups,P=R[Object.keys(R).filter(function(e){return w.includes(e)})[0]],D=N?Be(N):N;if(Object(n.useEffect)(function(){if(!w.some(function(e){return x.includes(e)})&&!P){if(!C&&!o){var e=Ee()();return j(U(e,I,A)),c(e),void y("your profile")}if(!N&&!u){var t=Ee()();return j(G(t,I,A)),i(t),void y("your courses")}if((!_||D.some(function(e){return!_[e.id]}))&&!h.length){var a=[];D.forEach(function(e){var t=Ee()();a.push(t),j(function(e,t,a,n,r){return function(){var o=Object(p.a)(d.a.mark(function o(c){var s;return d.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return c(S(e)),o.prev=1,o.next=4,g("courses/".concat(a,"/outcome_rollups"),n,r,{userId:t});case 4:s=o.sent,c(F(s.data.rollups,a)),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(1),c(O(e,o.t0.response));case 11:c(T(e));case 12:case"end":return o.stop()}},o,null,[[1,8]])}));return function(e){return o.apply(this,arguments)}}()}(t,C.id,e.id,I,A))}),b(a),y("your grades")}}},[e]),P)return r.a.createElement(je,{error:P});if(!C||!N||!_||w.some(function(e){return x.includes(e)}))return r.a.createElement("div",{align:"center"},r.a.createElement(Oe.a,null),r.a.createElement("span",{style:{paddingTop:"20px"}}),r.a.createElement(J.a.Title,{level:3},"Loading ".concat(k,"...")));var L=De(_),H=D.map(function(e){return{key:e.id,name:e.name,grade:L[e.id]?L[e.id].grade:"Error, try reloading",id:e.id}});return r.a.createElement("div",null,r.a.createElement(J.a.Title,{level:2},"Grades"),r.a.createElement(J.a.Text,{type:"secondary"},"If you have a grade in a class, click on the name to see a detailed breakdown of your grade."),r.a.createElement("div",{style:{marginBottom:"12px"}}),r.a.createElement(Re.a,{columns:Xe,dataSource:H}),r.a.createElement(J.a.Text,{type:"secondary"},"Please note that these grades may not be accurate or representative of your real grade. For the most accurate and up-to-date information, please consult someone from your school."))}),Ze=a(85),Qe=a(41),$e=function(e){return e.reduce(function(e,t){return e+t})/e.length},et=function(e,t){return+e.toFixed(t)},tt=[{key:"lowestOutcome",tab:"Lowest Outcome"},{key:"averageOutcomeScore",tab:"Average Outcome Score"},{key:"toGetAnA",tab:"How To Get An A"},{key:"moreInfo",tab:"More Info"}];function at(e){return r.a.createElement("div",null,r.a.createElement("div",{align:"center"},r.a.createElement(J.a.Title,{level:1},e.stat)),r.a.createElement(J.a.Text,null,e.text))}var nt=function(e){var t=Object(n.useState)(tt[0].key),a=Object(V.a)(t,2),o=a[0],c=a[1],s=e.lowestOutcome,l=e.outcomeRollupScores,u=e.grade,i=Ge.A,m=i.min,d=i.max,p=Math.floor(75*l.length/100);return r.a.createElement(K.a,{tabList:tt,activeTabKey:o,onTabChange:c},function(e){switch(e){case"lowestOutcome":return r.a.createElement(at,{stat:s.rollupScore.score,text:"Your lowest outcome is ".concat(s.outcome.display_name||s.outcome.title,", with a score of ").concat(s.rollupScore.score,".\n\nThis outcome's last assignment was ").concat(s.rollupScore.title,", and this outcome has been assessed ").concat(s.rollupScore.count," times.")});case"averageOutcomeScore":var t=et($e(l.map(function(e){return e.score})),3);return r.a.createElement(at,{stat:t,text:"Your average outcome score is ".concat(t,".")});case"toGetAnA":return"A"===u.grade?r.a.createElement("div",null,r.a.createElement("div",{align:"center"},r.a.createElement(J.a.Title,{level:1},"Nice job!")),r.a.createElement(J.a.Text,null,"You've already got an A in this class! To keep it, make sure 75% of outcome scores are over ",d," and that no outcome scores drop below ",m,".")):r.a.createElement("div",null,r.a.createElement(J.a.Text,null,"To get an A in this class, you'll need to make sure that:"),r.a.createElement("ul",null,r.a.createElement("li",null,s.lowestCountedOutcome>d&&r.a.createElement(Se.a,{type:"check-circle"})," ","75% (",p,") of outcomes are above"," ",d," (currently,"," ",u.sortedOutcomes.filter(function(e){return e<d}).length," outcomes are not above ",d,")"),r.a.createElement("li",null,s.rollupScore.score>=m&&r.a.createElement(Se.a,{type:"check-circle"})," ","No outcomes are below ",m," (currently,"," ",u.sortedOutcomes.filter(function(e){return e<m}).length," outcomes are below ",m,")")));case"moreInfo":var a=function(e){return r.a.createElement(K.a.Grid,{key:Ee()(),hoverable:"false"},e)};return[a("75% (rounded) of ".concat(l.length," (number of outcomes with a grade) is ").concat(p,".")),a("More info is coming to this section in the future.")];default:return r.a.createElement(J.a.Text,null,"There was an error: OutcomeInfo Default Case Used")}}(o))},rt=[{title:"Name",dataIndex:"name",key:"name",sorter:function(e,t){return Je(e.name,t.name)},render:function(e,t){return r.a.createElement("div",null,r.a.createElement(J.a.Text,{delete:Ne(e)&&!1===t.gradeHasSuccessSkills},e),r.a.createElement("span",{style:{width:"7px",display:"inline-block"}}),t.timesAssessed<4&&r.a.createElement(de.a,{title:"Below 4 Assessments",placement:"topLeft",content:r.a.createElement(J.a.Text,null,"This outcome has only been assessed ",t.timesAssessed," time",1!==t.timesAssessed&&"s",".",r.a.createElement("br",null),"Outcomes must be assessed 4 or more times to count in your real grade.",r.a.createElement("br",null),"It's still counted here, though.")},r.a.createElement(Se.a,{type:"info-circle"})))}},{title:"Score",dataIndex:"score",key:"score",sorter:function(e,t){return e.score-t.score}},{title:"Times Assessed",dataIndex:"timesAssessed",key:"timesAssessed",sorter:function(e,t){return e.timesAssessed-t.timesAssessed}},{title:"Last Assignment",dataIndex:"lastAssignment",key:"lastAssignment",sorter:function(e,t){return Je(e.lastAssignment,t.lastAssignment)}}],ot=[{title:"Assignment Name",dataIndex:"assignmentName",key:"assignmentName"},{title:"Score",dataIndex:"score",key:"score",render:function(e){return"".concat(e.score,"/").concat(e.possible," (").concat(e.percent,"%)")}},{title:"Last Submission",dataIndex:"lastSubmission",key:"lastSubmission"},{title:"Mastery Reached",dataIndex:"masteryReached",key:"masteryReached",render:function(e){return r.a.createElement("div",{style:{margin:"auto"}},!0===e?r.a.createElement(Se.a,{type:"check"}):r.a.createElement(Se.a,{type:"close"}))}},{title:"Actions",key:"actions",render:function(e,t){return r.a.createElement("div",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t.assignmentUrl},"Open on Canvas ",r.a.createElement(Se.a,{component:ze})))}}];var ct=Object(s.b)(function(e){return{loading:e.loading,error:e.error,courses:e.canvas.courses,token:e.canvas.token,subdomain:e.canvas.subdomain,outcomes:e.canvas.outcomes,outcomeRollups:e.canvas.outcomeRollups,outcomeResults:e.canvas.outcomeResults,assignments:e.canvas.assignments,user:e.canvas.user}})(function(e){var t=Object(n.useState)(""),a=Object(V.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(""),i=Object(V.a)(s,2),m=i[0],f=i[1],h=Object(n.useState)(""),b=Object(V.a)(h,2),v=b[0],E=b[1],k=Object(n.useState)(""),y=Object(V.a)(k,2),w=y[0],j=y[1],I=Object(n.useState)(""),A=Object(V.a)(I,2),x=A[0],R=A[1],C=Object(n.useState)(""),N=Object(V.a)(C,2),_=N[0],P=N[1],D=e.dispatch,L=e.token,F=e.subdomain,Y=e.loading,W=e.error,z=e.user,X=e.courses,Z=e.outcomeRollups,Q=e.outcomeResults,$=e.assignments,ee=W[o]||W[m]||W[v]||W[w]||W[x],te=parseInt(e.match.params.courseId),ae=e.outcomes;if(Object(n.useEffect)(function(){if(!isNaN(te)&&!(Y.includes(m)||Y.includes(v)||Y.includes(o)||ee)){if(!z&&!o){var e=Ee()();return D(U(e,L,F)),c(e),void P("your profile")}if(!X&&!m){var t=Ee()();return D(G(t,L,F)),f(t),void P("your courses")}if((!Z||!ae||!ae[te])&&!v){var a=Ee()();D(function(e,t,a,n,r){return function(){var o=Object(p.a)(d.a.mark(function o(c){var s,l,u;return d.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return c(S(e)),o.prev=1,o.next=4,g("courses/".concat(a,"/outcome_rollups"),n,r,{userId:t});case 4:return s=o.sent,l=[],s.data.rollups.forEach(function(e){e.scores.forEach(function(e){return l.push(e.links.outcome)})}),o.next=9,Promise.all(l.map(function(e){return g("outcomes/".concat(e),n,r).then(function(e){return e.data})}));case 9:u=o.sent,c(H(s.data.rollups,u,a)),o.next=16;break;case 13:o.prev=13,o.t0=o.catch(1),c(O(e,o.t0.response));case 16:c(T(e));case 17:case"end":return o.stop()}},o,null,[[1,13]])}));return function(e){return o.apply(this,arguments)}}()}(a,z.id,te,L,F)),P("your grades"),E(a)}if((!Q||!Q[te])&&!w){var n=Ee()();D(function(e,t,a,n,r){return function(){var o=Object(p.a)(d.a.mark(function o(c){var s;return d.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return c(S(e)),o.prev=1,o.next=4,g("courses/".concat(a,"/outcome_results"),n,r,{userId:t});case 4:s=o.sent,c(B(s.data.outcome_results,a)),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(1),c(O(e,o.t0.response));case 11:c(T(e));case 12:case"end":return o.stop()}},o,null,[[1,8]])}));return function(e){return o.apply(this,arguments)}}()}(n,z.id,te,L,F)),P("your grade in this class"),j(n)}if((!$||!$[te])&&!x){var r=Ee()();D(function(e,t,a,n){return function(){var r=Object(p.a)(d.a.mark(function r(o){var c;return d.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o(S(e)),r.prev=1,r.next=4,g("courses/".concat(t,"/assignments"),a,n,{});case 4:c=r.sent,o(M(c.data,t)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),o(O(e,r.t0.response));case 11:o(T(e));case 12:case"end":return r.stop()}},r,null,[[1,8]])}));return function(e){return r.apply(this,arguments)}}()}(r,te,L,F)),P("your assignments"),R(r)}}},[e]),isNaN(te))return re.a.error({message:"Invalid Course ID",description:"Course IDs contain only numbers."}),r.a.createElement(u.a,{to:"/dashboard/grades"});if(ee)return r.a.createElement(je,{error:ee});if(!z||!X||!ae||!ae[te]||!Z||!Q||!Q[te]||!$||!$[te])return r.a.createElement("div",{align:"center"},r.a.createElement(Oe.a,{size:"default"}),r.a.createElement("span",{style:{marginTop:"10px"}}),r.a.createElement(J.a.Title,{level:3},"Loading ".concat(_,"...")));var ne=e.courses.filter(function(e){return e.id===te})[0];if(!ne)return re.a.error({message:"Unknown Course",description:"Couldn't find a course with the specified ID."}),r.a.createElement(u.a,{to:"/dashboard/grades"});var oe=De(Object(Ce.a)({},te,e.outcomeRollups[te]))[te],ce=e.outcomes[te],se=e.outcomeRollups[te][0].scores;if(!oe||"N/A"===oe.grade)return r.a.createElement("div",{align:"center"},r.a.createElement(J.a.Title,{level:3},"Grade Breakdown Isn't Available for ",ne.name,"."),r.a.createElement(l.b,{to:"/dashboard/grades"},r.a.createElement(q.a,{type:"primary"},"Back to Grades")));var le=Ge[oe.grade],ue=le.min,ie=le.max,me=function(){var e=se.filter(function(e){return e.score===oe.lowestOutcome})[0];return{outcome:ce.filter(function(t){return t.id===parseInt(e.links.outcome)})[0],rollupScore:e}}(),de=Q[te],pe=se.map(function(e){var t=ce.filter(function(t){return t.id===parseInt(e.links.outcome)})[0];return{gradeHasSuccessSkills:oe.hasSuccessSkills,name:t.display_name||t.title,score:e.score,lastAssignment:e.title,timesAssessed:e.count,key:t.id,id:t.id,assignmentTableData:de.filter(function(e){return parseInt(e.links.learning_outcome)===t.id}).map(function(e){var t=parseInt(e.links.assignment.split("_")[1]),a=$[te].filter(function(e){return e.id===t})[0];return{assignmentName:a?a.name:"unavailable",assignmentUrl:a?a.html_url:"unavailable",score:{score:e.score,possible:e.possible,percent:100*e.percent},lastSubmission:He()(e.submitted_or_assessed_at).calendar(),masteryReached:e.mastery,key:t}})}});return r.a.createElement("div",null,r.a.createElement(J.a.Title,{level:2},"Grade Breakdown for ",ne.name),r.a.createElement(Ze.a,{gutter:12},r.a.createElement(Qe.a,{span:8},r.a.createElement(K.a,{title:"Current Grade"},r.a.createElement("div",{align:"center"},r.a.createElement(J.a.Title,{level:1},oe.grade)),r.a.createElement(J.a.Text,null,"Your current grade, ",oe.grade,", requires 75% of outcomes to be above ",ie," and no outcomes to be below ",ue,"."," ",!0===oe.hasSuccessSkills?"Success skills were counted because they improved your grade.":!1===oe.hasSuccessSkills?"Success skills were not counted because they lowered your grade.":"Your grade is identical with and without success skills."))),r.a.createElement(Qe.a,{span:16},r.a.createElement(nt,{lowestOutcome:me,min:ue,outcomeRollupScores:se,grade:oe}))),r.a.createElement("div",{style:{padding:"15px"}}),r.a.createElement(J.a.Title,{level:3},"Outcomes"),r.a.createElement(Re.a,{columns:rt,dataSource:pe,expandedRowRender:function(e){return e.assignmentTableData.length>0?r.a.createElement(Re.a,{columns:ot,dataSource:e.assignmentTableData}):r.a.createElement(J.a.Text,null,"Couldn't get assignments for this outcome.")}}),r.a.createElement(J.a.Text,{type:"secondary"},"Please note that these grades may not be accurate or representative of your real grade. For the most accurate and up-to-date information, please consult someone from your school."))});var st=Object(s.b)(function(e){return{token:e.canvas.token,subdomain:e.canvas.subdomain}})(function(e){var t=e.token,a=e.subdomain;return e.dispatch(function(e,t){return function(){var a=Object(p.a)(d.a.mark(function a(n){var r;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g("oauth2/token",e,t,{},"delete").then(function(e){return e.data.forward_url});case 3:r=a.sent,n(L(r||"")),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),n(L("",a.t0));case 10:case"end":return a.stop()}},a,null,[[0,7]])}));return function(e){return a.apply(this,arguments)}}()}(t,a)),r.a.createElement(u.a,{to:"/"})}),lt=a(392),ut=a(400),it=a(205);var mt=function(){return Object(n.useEffect)(function(){var e=parseInt(b.currentVersion),t=isNaN(parseInt(localStorage.prevVersion))?1568909947971:parseInt(localStorage.prevVersion);if(e&&t&&!isNaN(e)&&!isNaN(t)){if(e>t){var a=it.filter(function(e){return e.timestamp>t});if(a.length<1)return;Z.a.info({title:r.a.createElement(J.a.Text,null,"New in version"," ",r.a.createElement(J.a.Text,{code:!0},e)),onOk:function(){localStorage.prevVersion=e},content:r.a.createElement(ut.a,{itemLayout:"horizontal",dataSource:a,renderItem:function(e){return r.a.createElement(ut.a.Item,null,r.a.createElement(ut.a.Item.Meta,{avatar:n(e.type),title:e.title,description:e.content}))}})})}}else localStorage.prevVersion=e;function n(e){var t="exclamation",a="black";switch(e){case 0:t="info-circle",a="orange";break;case 1:t="plus-circle",a="green"}return r.a.createElement(lt.a,{style:{backgroundColor:"#FFFFFF",color:a},icon:t})}},[]),null},dt=ie.a.Content,pt=ie.a.Footer,ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={"/dashboard":"Dashboard","/dashboard/profile":"Profile","/dashboard/grades":"Grades"};return e.forEach(function(e){return t["/dashboard/grades/".concat(e.id)]="Grade Breakdown for ".concat(e.name)}),t};var ht=Object(s.b)(function(e){return{token:e.canvas.token,courses:e.canvas.courses,user:e.canvas.user}})(function(e){var t=e.token,a=Object(n.useState)(!1),o=Object(V.a)(a,2),c=o[0],s=o[1];if(!localStorage.token)return r.a.createElement(u.a,{to:"/"});if(!t)return null;i.b(e.location.pathname+(e.location.search.includes("~")?"":e.location.search));var m=e.location,d=e.user,p=m.pathname.split("/").filter(function(e){return e}),f=ft(e.courses||[]),h=p.map(function(e,t){var a="/".concat(p.slice(0,t+1).join("/"));return r.a.createElement(me.a.Item,{key:a},r.a.createElement(l.b,{to:a},f[a]))});return!1===c&&d&&(i.c({userId:d.id}),s(!0)),r.a.createElement(ie.a,{className:"layout"},r.a.createElement(ve,null),r.a.createElement(dt,{style:{padding:"0 50px"}},r.a.createElement(me.a,{style:{marginTop:12}},h),r.a.createElement("div",{style:{background:"#fff",padding:24,marginTop:12,minHeight:280}},r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/dashboard",render:function(){return r.a.createElement(u.a,{to:"/dashboard/grades"})}}),r.a.createElement(u.b,{exact:!0,path:"/dashboard/profile",component:Ae}),r.a.createElement(u.b,{exact:!0,path:"/dashboard/grades",component:qe}),r.a.createElement(u.b,{exact:!0,path:"/dashboard/grades/:courseId",component:ct}),r.a.createElement(u.b,{exact:!0,path:"/dashboard/logout",component:st}),r.a.createElement(u.b,{render:function(){return r.a.createElement(u.a,{to:"/dashboard"})}})))),r.a.createElement(mt,null),r.a.createElement(pt,{style:{textAlign:"center"}},r.a.createElement(de.a,{trigger:"click",content:r.a.createElement(J.a.Text,null,"Version ",b.currentVersion,"development"===b.nodeEnv&&"-DEV")},"Built by iamtheyammer 2019")))});var bt=Object(s.b)(function(e){return{}})(function(e){return Object(n.useEffect)(function(){var t,a,n;localStorage.token&&e.dispatch((t=localStorage.token,a=localStorage.refreshToken,n=localStorage.subdomain||"",{type:j,token:t,refreshToken:a,subdomain:n}))},[!0]),i.a(b.googleAnalyticsId),i.b("/"),r.a.createElement(l.a,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",component:Q}),r.a.createElement(u.b,{exact:!0,path:"/tokenEntry",component:se}),r.a.createElement(u.b,{exact:!0,path:"/oauth2response",component:ue}),r.a.createElement(u.b,{path:"/dashboard",component:ht}),r.a.createElement(u.b,{status:404,render:function(){return r.a.createElement("div",{align:"center"},r.a.createElement("p",{color:"#fffff"},"404 Not Found"),r.a.createElement(l.b,{to:"/"},"Home"))}})))}),vt=a(54);function gt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Et(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gt(a,!0).forEach(function(t){Object(Ce.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Ot(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var kt=Object(vt.c)({canvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return{};case j:return Et({},e,{},{token:t.token,refreshToken:t.refreshToken,subdomain:t.subdomain});case I:return Et({},e,{},{token:t.token,subdomain:t.subdomain});case A:return Et({},e,{token:t.token,refreshToken:t.refreshToken,subdomain:t.subdomain});case x:return Et({},e,{token:t.newToken});case R:return Et({},e,{user:t.user});case C:return Et({},e,{courses:t.courses});case _:var a=t.courseId;return Et({},e,{},{outcomeRollups:Et({},e.outcomeRollups,{},Object(Ce.a)({},a,t.results))});case N:return Et({},e,{},{outcomeResults:Et({},e.outcomeResults,Object(Ce.a)({},t.courseId,t.results)),outcomes:Et({},e.outcomes)});case P:return Et({},e,{},{outcomeRollups:Et({},e.outcomeRollups,Object(Ce.a)({},t.courseId,t.results)),outcomes:Et({},e.outcomes,Object(Ce.a)({},t.courseId,t.outcomes))});case D:return Et({},e,{},{assignments:Et({},e.assignments,Object(Ce.a)({},t.courseId,t.assignments))});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ot(a,!0).forEach(function(t){Object(Ce.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ot(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,Object(Ce.a)({},t.id,{res:t.res}));default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return e.concat([t.id]);case y:return e.filter(function(e){return e!==t.id});default:return e}}}),yt=a(206),St=a.n(yt),Tt=[a(207).a];"development"===b.nodeEnv&&Tt.push(St.a);var wt=vt.a.apply(void 0,Tt),jt=Object(vt.d)(kt,wt);c.a.render(r.a.createElement(s.a,{store:jt},r.a.createElement(bt,null)),document.getElementById("root"))}},[[210,1,2]]]);